
<%- partial('_partial/plugins/analytics.ejs') %>
<%- partial('_partial/page-scripts.ejs') %>
<% if (theme.post.fancybox.enable && (is_page() || is_post())){ %>
    <link href="<%- theme.static_prefix.fancybox %>jquery.fancybox.min.css" rel="stylesheet">
    <script src="<%- theme.static_prefix.fancybox %>jquery.fancybox.min.js"></script>
<% } %>
<% if (theme.search.enable){ %>
    <%- js('/js/search.js') %>
    <%- partial('_partial/plugins/search.ejs') %>
<% } %>
<% if (theme.post.lazyload.enable && (is_page() || is_post())){ %>
    <script>
        var content=$(".lazyload-img");var preload=0;$(document).ready(function(){function load(){var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;var winTop=window.innerHeight;for(var i=0;i<content.length;i++){if(content[i].offsetTop<=scrollTop+winTop+preload){if(!$(content[i]).attr("load")){var pageContentRaw=$(content[i]).attr("data-srcset");$(content[i]).attr('srcset',pageContentRaw);$(content[i]).attr("load",true)}}}}load();window.onscroll=function(){load()}});
    </script>
<% } %>
<% if (theme.post.code.highlight && (is_page() || is_post())){ %>
    <script src="<%- theme.static_prefix.hljs %>hljs.js"></script>  
    <script>hljs.initHighlightingOnLoad();</script>
<% } %>
<% if (is_post() && theme.post.toc.enable && page.toc !== false){ %>
    <script>
        $(".toc-btn").click(function(){
            $(".post-toc").toggleClass("display-inline");
        });
    </script>
<% } %>
<% if (is_post() && theme.post.toc.enable && theme.post.toc.type == "tocbot" && page.toc !== false) { %>
    <script src="<%- theme.static_prefix.tocbot %>tocbot.min.js"></script>
    <script>
        window.tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.post-toc',
            // Where to grab the headings to build the table of contents.
            contentSelector: '#post-content',
            // Which headings to grab inside of the contentSelector element.
            headingSelector: '<%- theme.post.toc.tocbot.headingSelector %>' || 'h1, h2, h3, h4, h5, h6',
            // For headings inside relative or absolute positioned containers within content.
            hasInnerContainers: true,
            linkClass: 'tocbot-link',
            activeLinkClass: 'tocbot-active-link',
            listClass: 'tocbot-list',
            isCollapsedClass: 'tocbot-is-collapsed',
            collapsibleClass: 'tocbot-is-collapsible',
            collapseDepth: <%- theme.post.toc.tocbot.collapseDepth %> || 0,
            scrollSmooth    : true
        });
    </script>
<% } %>
<% if (theme.global.web_analytics.busuanzi.enable || theme.post.views.enable){ %>
    <script src="<%- theme.static_prefix.busuanzi %>busuanzi.pure.mini.js" async></script>
<% } %>
